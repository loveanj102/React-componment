<!DOCTYPE html>
<html>

  <head>
    <title>TodoList</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta charset="UTF-8">
    <script src="../javascripts/vendor.js"></script>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/redux/4.2.0/redux.min.js"
      integrity="sha512-1/8Tj23BRrWnKZXeBruk6wTnsMJbi/lJsk9bsRgVwb6j5q39n0A00gFjbCTaDo5l5XrPVv4DZXftrJExhRF/Ug=="
      crossorigin="anonymous" referrerpolicy="no-referrer"></script>
  </head>

  <body class="bg-lighter">
    <div class="container main my-5">
      <div class="row">
        <main class="col post">
          <!-- ç« ç¯€æ¨™é¡Œ -->
          <div class="mb-4">
            <h4 class="mt-0 text-muted">TodoListçš„æ–°å¢,ä¿®æ”¹,åˆªé™¤</h4>
            <p class="mt-0 text-muted">
              ä½¿ç”¨useStateå„²å­˜å¾…è¾¦äº‹é …çš„ç‹€æ…‹ä»¥åŠæ–¹æ³•ï¼Œ<br />é»é¸â€œåˆªé™¤â€æŒ‰éˆ•æ™‚ï¼Œä½¿ç”¨spliceåˆªé™¤è©²ç­†é …ç›®ä¸¦é‡æ–°ç·¨è¼¯ç´¢å¼•ï¼Œ<br />é»é¸â€ç·¨è¼¯â€œæŒ‰éˆ•æ™‚ï¼Œå°‡è¢«ç·¨è¼¯çš„é …ç›®å¡«å…¥è¼¸å…¥æ¬„ä½ï¼Œä¸¦é‡æ–°ç·¨æ’ç´¢å¼•å€¼
            </p>
          </div>
          <!-- ğŸ”¥ğŸ”¥ç·´ç¿’é–‹å§‹ğŸ”¥ğŸ”¥ -->
          <div id="root"></div>
          <script type="text/babel">

            const { useState } = React

            const App = () => {

              const [data, setData] = useState([]);
              const [inputValue, setInputValue] = useState('');
              const [editingIndex, setEditingIndex] = useState(null); // è¿½è¹¤æ­£åœ¨è¢«ç·¨è¼¯çš„é …ç›®çš„ç´¢å¼•


              const handleChange = (e) => {
                setInputValue(e.target.value);
              };

              const handleSubmit = (e) => {
                e.preventDefault();
                if (editingIndex !== null) {
                  // å¦‚æœæ­£åœ¨ç·¨è¼¯ä¸­ï¼Œå‰‡æ›¿æ›åŸå§‹é …ç›®
                  const newData = [...data];
                  newData[editingIndex] = inputValue;
                  setData(newData);
                  setEditingIndex(null); // é‡ç½®ç·¨è¼¯ç´¢å¼•
                } else {
                  setData([...data, inputValue]);
                }
                setInputValue('');
              };

              const handleEdit = (index) => {
                setInputValue(data[index]); // å°‡è¢«ç·¨è¼¯çš„é …ç›®å¡«å…¥è¼¸å…¥æ¬„ä½
                setEditingIndex(index); // è¨­å®šç·¨è¼¯ç´¢å¼•
              };


              const handleDelete = (index) => {
                const newData = [...data];
                newData.splice(index, 1);
                setData(newData);
                setEditingIndex(null); // é‡ç½®ç·¨è¼¯ç´¢å¼•
              };

              const handleKeyPress = (e) => {
                if (e.key === 'Enter') {
                  handleSubmit(e);
                }
              };


              return (<>
                <div className="input-group mb-3">
                  <input
                    type="text"
                    value={inputValue}
                    onChange={handleChange}
                    className="form-control"
                    placeholder="è«‹è¼¸å…¥ä»£è¾¦äº‹é …"
                    onKeyPress={handleKeyPress}
                  />
                  <button style={{ backgroundColor: '#295637', color: 'white' }} className="btn" type="button" onClick={handleSubmit}>
                    {editingIndex !== null ? 'ä¿®æ”¹' : 'æ–°å¢'} {/* æ ¹æ“šæ˜¯å¦æ­£åœ¨ç·¨è¼¯ä¾†ä¿®æ”¹æŒ‰éˆ•æ–‡å­— */}
                  </button>
                </div>
                {data.map((item, index) => (
                  <div className="card" key={index}>
                    <div className="card-body">
                      <h5 className="card-title">{item}</h5>

                      <button style={{ marginRight: '10px' }} className="btn btn-outline-secondary" type="button" onClick={() => handleEdit(index)}>
                        ä¿®æ”¹
                      </button>
                      <button className="btn btn-outline-danger ml-2" type="button" onClick={() => handleDelete(index)}>
                        åˆªé™¤
                      </button>

                    </div>
                  </div>
                ))}
              </>
              )
            }

            ReactDOM.createRoot(document.querySelector('#root'))
              .render(<App />)
          </script>
          <!-- ğŸ™‡ğŸ™‡ç·´ç¿’çµæŸğŸ™‡ğŸ™‡ -->
        </main>



      </div>
    </div>

    <nav class="navbar fixed-top navbar-expand-sm navbar-dark nav-bg">
      <div class="container-fluid">
        <a class="navbar-brand" href="/ReactComp">Reactå°å·¥å…·</a>
        <div class="collapse navbar-collapse" id="navbarCollapse">
          <ul class="navbar-nav">
            <li class="nav-item">
              <a class="nav-link " href="Hooks/todoList.html">ToDo List</a>
            </li>
            <li class="nav-item">
              <a class="nav-link " href="Hooks/VendingMachine.html">è²©è³£æ©Ÿ</a>
            </li>
            <li class="nav-item">
              <a class="nav-link " href="Hooks/LoginPage.html">ç™»å…¥</a>
            </li>
          </ul>
        </div>
      </div>
    </nav>

    <footer class="footer py-2 bg-light">
      <div class="container text-center">
        <small class="text-black-50 fw-light mb-0">CpoyRight By Nikki @DÃ©part Studio</small>
      </div>
    </footer>
    <link rel="stylesheet" href="../stylesheets/all.css">
    <link rel="stylesheet" href="../stylesheets/custom.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.9.1/font/bootstrap-icons.css">
  </body>

</html>