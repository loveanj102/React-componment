<!DOCTYPE html>
<html>

  <head>
    <title>ÈóúÊñº useState</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta charset="UTF-8">
    <script src="../javascripts/vendor.js"></script>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/redux/4.2.0/redux.min.js"
      integrity="sha512-1/8Tj23BRrWnKZXeBruk6wTnsMJbi/lJsk9bsRgVwb6j5q39n0A00gFjbCTaDo5l5XrPVv4DZXftrJExhRF/Ug=="
      crossorigin="anonymous" referrerpolicy="no-referrer"></script>

    <style>
      .proImg {
        width: 60px;
        height: 60px;

      }

      .getPrd {
        background-color: beige;
        width: 400px;
        height: 60px;
        border: 2px;
        border-radius: 16px;
        margin-right: 10px;
      }

      .moneyReturn {
        background-color: aqua;
        width: 60px;
        height: 60px;
        border: 2px;
        border-radius: 16px;

      }
    </style>

  </head>

  <body class="bg-lighter">
    <div class="container main my-5">
      <div class="row">
        <main class="col post">
          <!-- Á´†ÁØÄÊ®ôÈ°å -->
          <div class="mb-4">
            <h1 class="mt-0 text-muted">ReactËá™ÂãïË≤©Ë≥£Ê©ü</h1>
          </div>
          <!-- üî•üî•Á∑¥ÁøíÈñãÂßãüî•üî• -->


          <div id="root"></div>




          <script type="text/babel">
            const { useState } = React;

            // 1. Â∏∂ÂÖ•ÂïÜÂìÅË≥áÊñô => Èô£ÂàóË≥áÊñô (data)
            const data = [
              {
                id: 1,
                name: "ÂèØÊ®Ç",
                price: 20,
                productImageUrl: ""
              },
              {
                id: 2,
                name: "Èõ™Á¢ß",
                price: 18,
                productImageUrl: ""
              },
              {
                id: 3,
                name: "Ëä¨ÈÅî",
                price: 22,
                productImageUrl: ""
              },
              {
                id: 4,
                name: "ÂèØÊ®Ç",
                price: 20,
                productImageUrl: ""
              },
              {
                id: 5,
                name: "ÂèØÊ®ÇZero",
                price: 25,
                productImageUrl: ""
              },
              {
                id: 6,
                name: "ÂíñÂï°",
                price: 60,
                productImageUrl: ""
              },
              {
                id: 7,
                name: "ÊãøÈêµ",
                price: 80,
                productImageUrl: ""
              },
              {
                id: 8,
                name: "ÁáïÈ∫•ÊãøÈêµ",
                price: 100,
                productImageUrl: ""
              }
            ]
            // 2. ÊØèÂÄãÂïÜÂìÅÁöÜÊúâ‰∏ÄÂÄãÊåâÈàï (ÊåâÈàïÂèØËß∏ÁôºË≥ºË≤∑Ôºâ=> (selectedProduct) , Fn (handlePurchase)
            // 3. Áï∂ÊäïÂÖ•ÈáëÈ°çÔºàÊòØ‰∏ÄÂÄãinputÂèØËº∏ÂÖ•ÈáëÈ°çÔºâ=>(moneyInserted)ÔºåÁõ∏Â∞çÊáâÂïÜÂìÅÊåâÈàï‰∫ÆËµ∑ =>(if moneyInserted === price ?:)/ button color change
            // 4. Áï∂Ê∂àË≤ªËÄÖÊåâ‰∏ãÊåâÈàïÊôÇ => Fn (handlePurchase)
            // -Â¶ÇÊûúÊäïÂÖ•ÈáëÈ°çÁ≠âÊñºÂïÜÂìÅÈáëÈ°çÔºåÂïÜÂìÅÊéâËêΩ => result
            // -Â¶ÇÊûúÊäïÂÖ•ÈáëÈ°çÂ§ßÊñºÂïÜÂìÅÈáëÈ°çÔºåÂïÜÂìÅÊéâËêΩ‰πãÂ§ñÔºåÈÇÑÊúÉÊâæÂõûÂâ©È§òÈõ∂Èå¢ => result && (handleRefund)
            // -Â¶ÇÊûúÊäïÂÖ•ÈáëÈ°çÂ∞èÊñº‰ªª‰ΩïÂïÜÂìÅÈáëÈ°çÔºåÁÑ°Ê≥ïË≥ºË≤∑ÔºåÊåâ‰∏ãÈÄÄÊ¨æÈçµÔºåÊâæÂõûÊäïÂÖ•Èõ∂Èå¢ => (handleRefund)




            const App = () => {
              const [selectedProduct, setSelectedProduct] = useState(null);
              const [moneyInserted, setMoneyInserted] = useState(0);
              const [change, setChange] = useState(0);



              const handlePurchased = (product) => {
                if (moneyInserted >= product.price) {
                  setSelectedProduct(product);
                  setChange(moneyInserted - product.price);
                  setMoneyInserted(0);
                } else {
                  alert("ÈáëÈ°ç‰∏çË∂≥");
                }
              }

              const handleRefund = () => {
                setMoneyInserted(0);
                setChange(0);
                setSelectedProduct(null);
              };



              return (
                <div>
                  <div className="containter machine">
                    <h4 className="h4">Choose What you want</h4>
                    <div className="row">
                      <div className="row justify-content-start">
                        {
                          data.map((item) => {
                            return (
                              <div className="col d-flex flex-column align-items-center " key={item.id}>
                                <img className="proImg pb-2" alt="" />
                                <p>{item.name}</p>
                                <p>{item.price}</p>
                                <button type="button" className="btn btn btn-primary" onClick={() => handlePurchased(item)}>ÈÅ∏Êìá</button>
                              </div>
                            )
                          })
                        }
                      </div>

                      <div className="row justify-content-start gy-2">
                        <div className="insert">
                          <input type="text" value={moneyInserted} onChange={(e) => setMoneyInserted(e.target.value)} />
                          <p>{`ÊÇ®ÊäïÂÖ•ÁöÑÈáëÈ°çÁÇ∫Ôºö${moneyInserted} ÂÖÉ`}</p>
                        </div>
                      </div>

                      <div className="row justify-content-start gy-2">
                        <div className="d-flex flex-row">
                          <div className="col getPrd justify-content-between">
                            {selectedProduct && (
                              <div>
                                <p>{`ÊÇ®ÈÅ∏Êìá‰∫ÜÔºö${selectedProduct.name}`}</p>
                                <p>{`ÊâæÈõ∂Ôºö${change} ÂÖÉ`}</p>
                              </div>
                            )}
                          </div>
                          <div className="moneyReturn">
                            <button type="button" onClick={handleRefund}>ÈÄÄÊ¨æ</button>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>)
            }



            // #4 state Ëß∏ÁôºÊôÇÔºåÊúÉÂÆåÊï¥Êõ¥Êñ∞ function

            ReactDOM.createRoot(document.querySelector('#root'))
              .render(<App />)
          </script>






          <!-- üôáüôáÁ∑¥ÁøíÁµêÊùüüôáüôá -->
        </main>



      </div>
    </div>

    <nav class="navbar fixed-top navbar-expand-sm navbar-dark bg-secondary">
      <div class="container-fluid">
        <a class="navbar-brand" href="/ReactComp">Nikki React</a>
        <div class="collapse navbar-collapse" id="navbarCollapse">
          <ul class="navbar-nav">
            <li class="nav-item">
              <a class="nav-link " href="/todoList.html">ToDo List</a>
            </li>
            <li class="nav-item">
              <a class="nav-link " href="/VendingMachine.html">Ë≤©Ë≥£Ê©ü</a>
            </li>
          </ul>
        </div>
      </div>
    </nav>

    <footer class="footer py-2 bg-light">
      <div class="container text-center">
        <small class="text-black-50 fw-light mb-0">CpoyRight By Nikki @D√©part Studio</small>
      </div>
    </footer>
    <link rel="stylesheet" href="../stylesheets/all.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.9.1/font/bootstrap-icons.css">
  </body>

</html>