<!DOCTYPE html>
<html>

  <head>
    <title>關於 useState</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta charset="UTF-8">
    <script src="../javascripts/vendor.js"></script>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/redux/4.2.0/redux.min.js"
      integrity="sha512-1/8Tj23BRrWnKZXeBruk6wTnsMJbi/lJsk9bsRgVwb6j5q39n0A00gFjbCTaDo5l5XrPVv4DZXftrJExhRF/Ug=="
      crossorigin="anonymous" referrerpolicy="no-referrer"></script>

    <style>
      .proImg {
        width: 60px;
        height: 60px;

      }

      .getPrd {
        background-color: beige;
        width: 400px;
        height: 60px;
        border: 2px;
        border-radius: 16px;
        margin-right: 10px;
      }

      .moneyReturn {
        background-color: aqua;
        width: 60px;
        height: 60px;
        border: 2px;
        border-radius: 16px;

      }
    </style>

  </head>

  <body class="bg-lighter">
    <div class="container main my-5">
      <div class="row">
        <main class="col post">
          <!-- 章節標題 -->
          <div class="mb-4">
            <h1 class="mt-0 text-muted">關於 useState</h1><small>檔名：<code>aboutUseState.html</code></small>
          </div>
          <!-- 🔥🔥練習開始🔥🔥 -->


          <div id="root"></div>




          <script type="text/babel">
            const { useState } = React;

            // 1. 帶入商品資料 => 陣列資料 (data)
            const data = [
              {
                id: 1,
                name: "可樂",
                price: 20,
                productImageUrl: ""
              },
              {
                id: 2,
                name: "雪碧",
                price: 18,
                productImageUrl: ""
              },
              {
                id: 3,
                name: "芬達",
                price: 22,
                productImageUrl: ""
              },
              {
                id: 4,
                name: "可樂",
                price: 20,
                productImageUrl: ""
              },
              {
                id: 5,
                name: "可樂Zero",
                price: 25,
                productImageUrl: ""
              },
              {
                id: 6,
                name: "咖啡",
                price: 60,
                productImageUrl: ""
              },
              {
                id: 7,
                name: "拿鐵",
                price: 80,
                productImageUrl: ""
              },
              {
                id: 8,
                name: "燕麥拿鐵",
                price: 100,
                productImageUrl: ""
              }
            ]
            // 2. 每個商品皆有一個按鈕 (按鈕可觸發購買）=> (selectedProduct) , Fn (handlePurchase)
            // 3. 當投入金額（是一個input可輸入金額）=>(moneyInserted)，相對應商品按鈕亮起 =>(if moneyInserted === price ?:)/ button color change
            // 4. 當消費者按下按鈕時 => Fn (handlePurchase)
            // -如果投入金額等於商品金額，商品掉落 => result
            // -如果投入金額大於商品金額，商品掉落之外，還會找回剩餘零錢 => result && (handleRefund)
            // -如果投入金額小於任何商品金額，無法購買，按下退款鍵，找回投入零錢 => (handleRefund)




            const App = () => {
              const [selectedProduct, setSelectedProduct] = useState(null);
              const [moneyInserted, setMoneyInserted] = useState(0);
              const [change, setChange] = useState(0);



              const handlePurchased = (product) => {
                if (moneyInserted >= product.price) {
                  setSelectedProduct(product);
                  setChange(moneyInserted - product.price);
                  setMoneyInserted(0);
                } else {
                  alert("金額不足");
                }
              }

              const handleRefund = () => {
                setMoneyInserted(0);
                setChange(0);
                setSelectedProduct(null);
              };



              return (
                <div>
                  <div className="containter machine">
                    <h4 className="h4">Choose What you want</h4>
                    <div className="row">
                      <div className="row justify-content-start">
                        {
                          data.map((item) => {
                            return (
                              <div className="col d-flex flex-column align-items-center " key={item.id}>
                                <img className="proImg pb-2" alt="" />
                                <p>{item.name}</p>
                                <p>{item.price}</p>
                                <button type="button" className="btn btn btn-primary" onClick={() => handlePurchased(item)}>選擇</button>
                              </div>
                            )
                          })
                        }
                      </div>

                      <div className="row justify-content-start gy-2">
                        <div className="insert">
                          <input type="text" value={moneyInserted} onChange={(e) => setMoneyInserted(e.target.value)} />
                          <p>{`您投入的金額為：${moneyInserted} 元`}</p>
                        </div>
                      </div>

                      <div className="row justify-content-start gy-2">
                        <div className="d-flex flex-row">
                          <div className="col getPrd justify-content-between">
                            {selectedProduct && (
                              <div>
                                <p>{`您選擇了：${selectedProduct.name}`}</p>
                                <p>{`找零：${change} 元`}</p>
                              </div>
                            )}
                          </div>
                          <div className="moneyReturn">
                            <button type="button" onClick={handleRefund}>退款</button>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>)
            }



            // #4 state 觸發時，會完整更新 function

            ReactDOM.createRoot(document.querySelector('#root'))
              .render(<App />)
          </script>






          <!-- 🙇🙇練習結束🙇🙇 -->
        </main>

        <aside class="col-md-3">
          <div class="sticky-top" style="top: 76px">

            <div class="list-group">

              <a href="/hooks/startHooks.html" class="list-group-item list-group-item-action
        
        ">
                開始使用 Hook
              </a>

              <a href="/hooks/inputUseState.html" class="list-group-item list-group-item-action
        
        ">
                input 綁定 useState
              </a>

              <a href="/hooks/aboutUseState.html" class="list-group-item list-group-item-action
        
        active">
                關於 useState
              </a>

              <a href="/hooks/aboutUseState2.html" class="list-group-item list-group-item-action
        
        ">
                關於 useState 2
              </a>

              <a href="/hooks/inputComponent.html" class="list-group-item list-group-item-action
        
        ">
                input 元件化
              </a>

              <a href="/hooks/useEffectIntro.html" class="list-group-item list-group-item-action
        
        ">
                useEffect 基礎介紹
              </a>

              <a href="/hooks/useEffectLifeCycle.html" class="list-group-item list-group-item-action
        
        ">
                useEffect 生命週期及非同步
              </a>

              <a href="/hooks/asyncList.html" class="list-group-item list-group-item-action
        
        ">
                非同步的列表呈現
              </a>

              <a href="/hooks/useStateCallback.html" class="list-group-item list-group-item-action
        
        ">
                useState 的前一個狀態
              </a>

              <a href="/hooks/bootstrapComponent.html" class="list-group-item list-group-item-action
        
        ">
                Bootstrap 元件與 React
              </a>

              <a href="/hooks/useRef.html" class="list-group-item list-group-item-action
        
        ">
                useRef
              </a>

              <a href="/hooks/useEffectRemoveListener.html" class="list-group-item list-group-item-action
        
        ">
                useEffect 移除監聽
              </a>

              <a href="/hooks/unsplashApi.html" class="list-group-item list-group-item-action
        
        ">
                Unsplash API 挑戰
              </a>

              <a href="/hooks/unsplashApiComplete.html" class="list-group-item list-group-item-action
        
        ">
                Unsplash API 完成
              </a>

            </div>
            <div class="mt-3 text-end p-2 bg-light rounded">
              <small class="text-black-50 fw-light mb-0">文件版本：2022/10/31</small>
            </div>
          </div>

        </aside>

      </div>
    </div>

    <nav class="navbar fixed-top navbar-expand-sm navbar-dark bg-secondary">
      <div class="container-fluid">
        <a class="navbar-brand" href="/">React 練習手冊</a>
        <div class="collapse navbar-collapse" id="navbarCollapse">
          <ul class="navbar-nav">
            <li class="nav-item">
              <a class="nav-link " href="/intro/createApp.html">認識 React</a>
            </li>
            <li class="nav-item">
              <a class="nav-link " href="/es6/shorthand.html">JS 必備觀念</a>
            </li>
            <li class="nav-item">
              <a class="nav-link " href="/components/intro.html">元件基礎</a>
            </li>
            <li class="nav-item">
              <a class="nav-link active" href="/hooks/startHooks.html">Hooks</a>
            </li>
            <li class="nav-item">
              <a class="nav-link " href="/form/basicForm.html">表單</a>
            </li>
            <li class="nav-item">
              <a class="nav-link " href="/hooksAdv/lifeCycle.html">Hooks 進階</a>
            </li>
          </ul>
        </div>
      </div>
    </nav>

    <footer class="footer py-2 bg-light">
      <div class="container text-center">
        <small class="text-black-50 fw-light mb-0">六角學院 React 課程專屬文件</small>
      </div>
    </footer>
    <link rel="stylesheet" href="../../stylesheets/all.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.9.1/font/bootstrap-icons.css">
  </body>

</html>
