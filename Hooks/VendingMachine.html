<!DOCTYPE html>
<html>

  <head>
    <title>é—œæ–¼ useState</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta charset="UTF-8">
    <script src="../javascripts/vendor.js"></script>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/redux/4.2.0/redux.min.js"
      integrity="sha512-1/8Tj23BRrWnKZXeBruk6wTnsMJbi/lJsk9bsRgVwb6j5q39n0A00gFjbCTaDo5l5XrPVv4DZXftrJExhRF/Ug=="
      crossorigin="anonymous" referrerpolicy="no-referrer"></script>

    <style>
      .proImg {
        width: 60px;
        height: 60px;

      }

      .getPrd {
        background-color: beige;
        width: 400px;
        height: 60px;
        border: 2px;
        border-radius: 16px;
        margin-right: 10px;
      }

      .moneyReturn {
        background-color: aqua;
        width: 60px;
        height: 60px;
        border: 2px;
        border-radius: 16px;

      }
    </style>

  </head>

  <body class="bg-lighter">
    <div class="container main my-5">
      <div class="row">
        <main class="col post">
          <!-- ç« ç¯€æ¨™é¡Œ -->
          <div class="mb-4">
            <h1 class="mt-0 text-muted">é—œæ–¼ useState</h1><small>æª”åï¼š<code>aboutUseState.html</code></small>
          </div>
          <!-- ğŸ”¥ğŸ”¥ç·´ç¿’é–‹å§‹ğŸ”¥ğŸ”¥ -->


          <div id="root"></div>




          <script type="text/babel">
            const { useState } = React;

            // 1. å¸¶å…¥å•†å“è³‡æ–™ => é™£åˆ—è³‡æ–™ (data)
            const data = [
              {
                id: 1,
                name: "å¯æ¨‚",
                price: 20,
                productImageUrl: ""
              },
              {
                id: 2,
                name: "é›ªç¢§",
                price: 18,
                productImageUrl: ""
              },
              {
                id: 3,
                name: "èŠ¬é”",
                price: 22,
                productImageUrl: ""
              },
              {
                id: 4,
                name: "å¯æ¨‚",
                price: 20,
                productImageUrl: ""
              },
              {
                id: 5,
                name: "å¯æ¨‚Zero",
                price: 25,
                productImageUrl: ""
              },
              {
                id: 6,
                name: "å’–å•¡",
                price: 60,
                productImageUrl: ""
              },
              {
                id: 7,
                name: "æ‹¿éµ",
                price: 80,
                productImageUrl: ""
              },
              {
                id: 8,
                name: "ç‡•éº¥æ‹¿éµ",
                price: 100,
                productImageUrl: ""
              }
            ]
            // 2. æ¯å€‹å•†å“çš†æœ‰ä¸€å€‹æŒ‰éˆ• (æŒ‰éˆ•å¯è§¸ç™¼è³¼è²·ï¼‰=> (selectedProduct) , Fn (handlePurchase)
            // 3. ç•¶æŠ•å…¥é‡‘é¡ï¼ˆæ˜¯ä¸€å€‹inputå¯è¼¸å…¥é‡‘é¡ï¼‰=>(moneyInserted)ï¼Œç›¸å°æ‡‰å•†å“æŒ‰éˆ•äº®èµ· =>(if moneyInserted === price ?:)/ button color change
            // 4. ç•¶æ¶ˆè²»è€…æŒ‰ä¸‹æŒ‰éˆ•æ™‚ => Fn (handlePurchase)
            // -å¦‚æœæŠ•å…¥é‡‘é¡ç­‰æ–¼å•†å“é‡‘é¡ï¼Œå•†å“æ‰è½ => result
            // -å¦‚æœæŠ•å…¥é‡‘é¡å¤§æ–¼å•†å“é‡‘é¡ï¼Œå•†å“æ‰è½ä¹‹å¤–ï¼Œé‚„æœƒæ‰¾å›å‰©é¤˜é›¶éŒ¢ => result && (handleRefund)
            // -å¦‚æœæŠ•å…¥é‡‘é¡å°æ–¼ä»»ä½•å•†å“é‡‘é¡ï¼Œç„¡æ³•è³¼è²·ï¼ŒæŒ‰ä¸‹é€€æ¬¾éµï¼Œæ‰¾å›æŠ•å…¥é›¶éŒ¢ => (handleRefund)




            const App = () => {
              const [selectedProduct, setSelectedProduct] = useState(null);
              const [moneyInserted, setMoneyInserted] = useState(0);
              const [change, setChange] = useState(0);



              const handlePurchased = (product) => {
                if (moneyInserted >= product.price) {
                  setSelectedProduct(product);
                  setChange(moneyInserted - product.price);
                  setMoneyInserted(0);
                } else {
                  alert("é‡‘é¡ä¸è¶³");
                }
              }

              const handleRefund = () => {
                setMoneyInserted(0);
                setChange(0);
                setSelectedProduct(null);
              };



              return (
                <div>
                  <div className="containter machine">
                    <h4 className="h4">Choose What you want</h4>
                    <div className="row">
                      <div className="row justify-content-start">
                        {
                          data.map((item) => {
                            return (
                              <div className="col d-flex flex-column align-items-center " key={item.id}>
                                <img className="proImg pb-2" alt="" />
                                <p>{item.name}</p>
                                <p>{item.price}</p>
                                <button type="button" className="btn btn btn-primary" onClick={() => handlePurchased(item)}>é¸æ“‡</button>
                              </div>
                            )
                          })
                        }
                      </div>

                      <div className="row justify-content-start gy-2">
                        <div className="insert">
                          <input type="text" value={moneyInserted} onChange={(e) => setMoneyInserted(e.target.value)} />
                          <p>{`æ‚¨æŠ•å…¥çš„é‡‘é¡ç‚ºï¼š${moneyInserted} å…ƒ`}</p>
                        </div>
                      </div>

                      <div className="row justify-content-start gy-2">
                        <div className="d-flex flex-row">
                          <div className="col getPrd justify-content-between">
                            {selectedProduct && (
                              <div>
                                <p>{`æ‚¨é¸æ“‡äº†ï¼š${selectedProduct.name}`}</p>
                                <p>{`æ‰¾é›¶ï¼š${change} å…ƒ`}</p>
                              </div>
                            )}
                          </div>
                          <div className="moneyReturn">
                            <button type="button" onClick={handleRefund}>é€€æ¬¾</button>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>)
            }



            // #4 state è§¸ç™¼æ™‚ï¼Œæœƒå®Œæ•´æ›´æ–° function

            ReactDOM.createRoot(document.querySelector('#root'))
              .render(<App />)
          </script>






          <!-- ğŸ™‡ğŸ™‡ç·´ç¿’çµæŸğŸ™‡ğŸ™‡ -->
        </main>

        <aside class="col-md-3">
          <div class="sticky-top" style="top: 76px">

            <div class="list-group">

              <a href="/hooks/startHooks.html" class="list-group-item list-group-item-action
        
        ">
                é–‹å§‹ä½¿ç”¨ Hook
              </a>

              <a href="/hooks/inputUseState.html" class="list-group-item list-group-item-action
        
        ">
                input ç¶å®š useState
              </a>

              <a href="/hooks/aboutUseState.html" class="list-group-item list-group-item-action
        
        active">
                é—œæ–¼ useState
              </a>

              <a href="/hooks/aboutUseState2.html" class="list-group-item list-group-item-action
        
        ">
                é—œæ–¼ useState 2
              </a>

              <a href="/hooks/inputComponent.html" class="list-group-item list-group-item-action
        
        ">
                input å…ƒä»¶åŒ–
              </a>

              <a href="/hooks/useEffectIntro.html" class="list-group-item list-group-item-action
        
        ">
                useEffect åŸºç¤ä»‹ç´¹
              </a>

              <a href="/hooks/useEffectLifeCycle.html" class="list-group-item list-group-item-action
        
        ">
                useEffect ç”Ÿå‘½é€±æœŸåŠéåŒæ­¥
              </a>

              <a href="/hooks/asyncList.html" class="list-group-item list-group-item-action
        
        ">
                éåŒæ­¥çš„åˆ—è¡¨å‘ˆç¾
              </a>

              <a href="/hooks/useStateCallback.html" class="list-group-item list-group-item-action
        
        ">
                useState çš„å‰ä¸€å€‹ç‹€æ…‹
              </a>

              <a href="/hooks/bootstrapComponent.html" class="list-group-item list-group-item-action
        
        ">
                Bootstrap å…ƒä»¶èˆ‡ React
              </a>

              <a href="/hooks/useRef.html" class="list-group-item list-group-item-action
        
        ">
                useRef
              </a>

              <a href="/hooks/useEffectRemoveListener.html" class="list-group-item list-group-item-action
        
        ">
                useEffect ç§»é™¤ç›£è½
              </a>

              <a href="/hooks/unsplashApi.html" class="list-group-item list-group-item-action
        
        ">
                Unsplash API æŒ‘æˆ°
              </a>

              <a href="/hooks/unsplashApiComplete.html" class="list-group-item list-group-item-action
        
        ">
                Unsplash API å®Œæˆ
              </a>

            </div>
            <div class="mt-3 text-end p-2 bg-light rounded">
              <small class="text-black-50 fw-light mb-0">æ–‡ä»¶ç‰ˆæœ¬ï¼š2022/10/31</small>
            </div>
          </div>

        </aside>

      </div>
    </div>

    <nav class="navbar fixed-top navbar-expand-sm navbar-dark bg-secondary">
      <div class="container-fluid">
        <a class="navbar-brand" href="/">React ç·´ç¿’æ‰‹å†Š</a>
        <div class="collapse navbar-collapse" id="navbarCollapse">
          <ul class="navbar-nav">
            <li class="nav-item">
              <a class="nav-link " href="/intro/createApp.html">èªè­˜ React</a>
            </li>
            <li class="nav-item">
              <a class="nav-link " href="/es6/shorthand.html">JS å¿…å‚™è§€å¿µ</a>
            </li>
            <li class="nav-item">
              <a class="nav-link " href="/components/intro.html">å…ƒä»¶åŸºç¤</a>
            </li>
            <li class="nav-item">
              <a class="nav-link active" href="/hooks/startHooks.html">Hooks</a>
            </li>
            <li class="nav-item">
              <a class="nav-link " href="/form/basicForm.html">è¡¨å–®</a>
            </li>
            <li class="nav-item">
              <a class="nav-link " href="/hooksAdv/lifeCycle.html">Hooks é€²éš</a>
            </li>
          </ul>
        </div>
      </div>
    </nav>

    <footer class="footer py-2 bg-light">
      <div class="container text-center">
        <small class="text-black-50 fw-light mb-0">å…­è§’å­¸é™¢ React èª²ç¨‹å°ˆå±¬æ–‡ä»¶</small>
      </div>
    </footer>
    <link rel="stylesheet" href="../../stylesheets/all.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.9.1/font/bootstrap-icons.css">
  </body>

</html>
